# 学会タイムキーパーシステム

リアルタイム同期対応のWebベース学会タイムキーパーです。  
同一LAN内の複数端末（PC・iPad・スマホ）でリアルタイム同期します。

---

## ファイル構成

```
timekeeper/
├── timekeeper_server.py   ← メインサーバー
├── start.bat              ← Windows用 起動スクリプト
├── templates/
│   ├── index.html         ← トップ (QRコード付きアクセスガイド)
│   ├── admin.html         ← 管理画面 (司会・スタッフ用)
│   └── display.html       ← 発表者画面 (スクリーン・演者確認用)
└── static/
    └── (bell.wav など、必要に応じて配置)
```

---

## インストール

```bash
pip install fastapi uvicorn python-socketio aiofiles qrcode pillow
```

---

## 起動方法

### Windows
```
start.bat をダブルクリック
```

### Mac / Linux
```bash
python timekeeper_server.py
```

---

## アクセス

サーバー起動後、ターミナルに表示されるIPアドレスを確認します。

| URL | 用途 |
|-----|------|
| `http://[IP]:8000/` | トップ（QRコード付き） |
| `http://[IP]:8000/admin` | **管理画面** — 司会・スタッフが操作 |
| `http://[IP]:8000/display` | **発表者画面** — スクリーンや演者卓上タブレット |

> 全端末を同じWi-Fiに接続してください。

---

## 使い方

### 典型的なセットアップ

```
[スタッフのスマホ/タブレット]  →  /admin  (時間設定・START/STOP/RESET)
[会場スクリーン用PC]           →  /display (大型表示)
[演者の卓上タブレット]         →  /display (確認用)
```

### 操作フロー

1. `/admin` を開いて **発表時間・ベル時刻** を設定
2. **[適用]** ボタンで確定
3. 発表開始と同時に **[▶ START]**
4. 必要に応じて **[⏸ PAUSE]** / **[▶ 再開]**
5. 次の発表者に備えて **[↺ RESET]**

### ベル設定（デフォルト）

| ベル | 経過時間 | 回数 |
|------|---------|------|
| ベル1回 | 1分経過 | 1回 |
| ベル2回 | 2分経過 | 2回 |
| ベル3回 | 3分経過 | 3回（終了合図） |

各ベルは ON/OFF 切替可能。経過分・秒を自由に設定できます。

---

## ベル音について

**発表者画面 (`/display`)** 側の端末でベル音が鳴ります。  
Web Audio API によるシンセサイズベル音（インストール不要、高品質）。

> **重要**: iOSの場合、最初に画面をタップしてからオーディオが有効になります。

---

## 要件

- Python 3.8以上
- 同一LAN環境
- モダンブラウザ（Chrome / Safari / Firefox / Edge）

---

## 機能

- 管理画面・発表者画面の分離
- 複数端末のリアルタイム同期（WebSocket）
- ベル音をWeb Audio APIシンセサイザーに変更（高品質）
- 発表時間・ベル時刻に「秒」指定を追加
- QRコードによる簡単接続
- プログレスバー・ベルインジケーター追加
- 一時停止機能追加
